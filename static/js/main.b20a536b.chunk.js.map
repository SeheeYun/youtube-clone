{"version":3,"sources":["components/item.jsx","components/itemList.jsx","components/header.jsx","components/player.jsx","app.jsx","repository/repository.js","store/store.js","index.js"],"names":["observer","item","diff","view","onItemClick","className","onClick","href","src","snippet","thumbnails","medium","url","alt","title","channelTitle","items","parseIntView","useCallback","statistics","viewCount","parseInt","Date","getTime","publishedAt","map","id","indexOf","onSubmit","inputRef","onSearchBar","type","ref","stype","placeholder","allowFullScreen","toLocaleString","substr","likeCount","dislikeCount","description","inject","store","useRef","e","preventDefault","window","scrollTo","top","value","current","addPage","document","querySelector","classList","toggle","useEffect","addEventListener","onScroll","passive","removeEventListener","documentElement","scrollTop","clientHeight","scrollHeight","addNextPage","key","fetchData","params","pageToken","a","esc","encodeURIComponent","query","Object","keys","k","join","fetch","getRequestOptions","response","json","console","log","getItemsId","keyword","this","method","redirect","process","observable","makeObservable","popular","chart","regionCode","search","nextPageToken","toJS","_items","computed","action","repository","then","runInAction","videoId","concat","ReactDOM","render","Store","getElementById"],"mappings":"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","file":"static/js/main.b20a536b.chunk.js","sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\n\nconst Item = ({ item, diff, view, onItemClick }) => {\n  const itemClick = () => {\n    onItemClick(item);\n  };\n\n  return (\n    <li className=\"item\">\n      <div className=\"item_box\" onClick={itemClick}>\n        <a href=\"#\" className=\"thumb\">\n          <img src={item.snippet.thumbnails.medium.url} alt=\"thumb\" />\n        </a>\n        <div className=\"meta\">\n          <a className=\"title\" href=\"#\">\n            {item.snippet.title}\n          </a>\n          <div className=\"channel_title\">{item.snippet.channelTitle}</div>\n          <div className=\"meta_data item_meta_data\">\n            <span>조회수 {view}회</span>\n            <span>{diff} 전</span>\n          </div>\n        </div>\n      </div>\n    </li>\n  );\n};\n\nexport default observer(Item);\n","import React, { useCallback } from 'react';\nimport Item from './item';\nimport { observer } from 'mobx-react';\n\nconst ItemList = ({ items, onItemClick }) => {\n  const parseIntView = useCallback(item => {\n    const view = item.statistics.viewCount;\n    if (view >= 10000) {\n      return parseInt(view / 10000) + '만';\n    }\n  }, []);\n\n  const diff = useCallback(item => {\n    const curDate = new Date().getTime();\n    const itemDate = new Date(item.snippet.publishedAt).getTime();\n    let diff = curDate - itemDate;\n    diff = parseInt((diff / (1000 * 60 * 60)) % 24);\n    if (diff >= 24) {\n      return '1일';\n    }\n    return diff + '시간';\n  }, []);\n\n  return (\n    <ul className=\"item_list\">\n      {items.map(item => (\n        <Item\n          key={item.id + items.indexOf(item)}\n          item={item}\n          diff={diff(item)}\n          view={item.statistics && parseIntView(item)}\n          onItemClick={onItemClick}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default observer(ItemList);\n","import { React } from 'react';\nimport { observer } from 'mobx-react';\n\nconst Header = ({ onSubmit, inputRef, onSearchBar }) => {\n  return (\n    <header className=\"header\">\n      <a href=\"https://seheeyun.github.io/youtube-clone/\" className=\"logo\">\n        <img src=\"./images/logo.png\" alt=\"logo\" />\n        <span>YunTube</span>\n      </a>\n      <div className=\"search_box\">\n        <form className=\"search_form\" onSubmit={onSubmit}>\n          <button type=\"button\" className=\"back_btn\" onClick={onSearchBar}>\n            <i className=\"fas fa-arrow-left\"></i>\n          </button>\n          <input ref={inputRef} stype=\"text\" placeholder=\"검색\" />\n          <button type=\"submit\" className=\"search_btn\">\n            <i className=\"fas fa-search\"></i>\n          </button>\n        </form>\n      </div>\n      <div className=\"top_bar\">\n        <button type=\"button\" className=\"search_btn\" onClick={onSearchBar}>\n          <i className=\"fas fa-search\"></i>\n        </button>\n        <button className=\"avatar_btn\">\n          <i className=\"fas fa-user\"></i>\n        </button>\n      </div>\n    </header>\n  );\n};\n\nexport default observer(Header);\n","import React from 'react';\nimport { observer } from 'mobx-react';\n\nconst Player = ({ item }) => {\n  return (\n    <div className=\"player_box\">\n      <div className=\"player_video_box\">\n        <div className=\"player_video\">\n          <iframe\n            title=\"video\"\n            id=\"player\"\n            type=\"text/html\"\n            allowFullScreen\n            src={`https://www.youtube.com/embed/${item.id}`}\n          />\n        </div>\n      </div>\n      <div className=\"video_info_box\">\n        <div className=\"video_info\">\n          <h1 className=\"title\">{item.snippet.title}</h1>\n          <div>\n            <div className=\"meta_data\">\n              <span>\n                조회수 {parseInt(item.statistics.viewCount).toLocaleString()}회\n              </span>\n              <span>{item.snippet.publishedAt.substr(0, 10)}</span>\n            </div>\n            <div className=\"like_disLike\">\n              <button>\n                <i className=\"fas fa-thumbs-up\"></i> {item.statistics.likeCount}\n              </button>\n              <button>\n                <i className=\"fas fa-thumbs-down\"></i>{' '}\n                {item.statistics.dislikeCount}\n              </button>\n            </div>\n          </div>\n        </div>\n        <div className=\"video_meta\">\n          <div className=\"meta_thumb\">\n            {item.snippet.channelTitle.substr(0, 1)}\n          </div>\n          <div className=\"meta\">\n            <span>{item.snippet.channelTitle}</span>\n            <span>{item.snippet.description}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default observer(Player);\n","import './app.css';\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport ItemList from './components/itemList';\nimport Header from './components/header';\nimport Player from './components/player';\nimport { inject, observer } from 'mobx-react';\n\nconst App = ({ store }) => {\n  const inputRef = useRef();\n\n  const onSubmit = useCallback(e => {\n    e.preventDefault();\n    window.scrollTo({ top: 0 });\n    const value = inputRef.current.value;\n    value && store.addPage(value);\n    onSearchBar();\n  }, []);\n\n  const onSearchBar = useCallback(() => {\n    const searchBox = document.querySelector('.search_box');\n    searchBox.classList.toggle('on_search_box');\n  }, []);\n\n  useEffect(() => {\n    store.addPage();\n  }, [store]);\n\n  useEffect(() => {\n    window.addEventListener('scroll', onScroll, { passive: true });\n    return () =>\n      window.removeEventListener('scroll', onScroll, { passive: true });\n  }, []);\n\n  const onScroll = () => {\n    const { scrollTop, clientHeight, scrollHeight } = document.documentElement;\n    if (scrollTop + clientHeight === scrollHeight) {\n      !inputRef.current.value\n        ? store.addNextPage()\n        : store.addNextPage(inputRef.current.value);\n    }\n  };\n\n  return (\n    <>\n      <Header\n        onSubmit={onSubmit}\n        onSearchBar={onSearchBar}\n        inputRef={inputRef}\n      />\n      <div className={`content ${store.item ? 'on_player' : ''}`}>\n        {store.item && <Player item={store.item} />}\n        {store.items && (\n          <ItemList items={store.items} onItemClick={store.onItemClick} />\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default inject('store')(observer(App));\n","class Repository {\n  constructor(key) {\n    this.key = key;\n    this.getRequestOptions = {\n      method: 'GET',\n      redirect: 'follow',\n    };\n  }\n\n  fetchData = async (params, pageToken) => {\n    const esc = encodeURIComponent;\n    const query = Object.keys(params)\n      .map(k => esc(k) + '=' + esc(params[k]))\n      .join('&');\n\n    try {\n      const response = await fetch(\n        `https://youtube.googleapis.com/youtube/v3/videos?part=snippet,statistics&maxResults=20&key=${this.key}&` +\n          query +\n          (pageToken ? `&pageToken=${pageToken}` : ''),\n        this.getRequestOptions\n      );\n      return await response.json();\n    } catch (error) {\n      return console.log('error', error);\n    }\n  };\n\n  getItemsId = async (keyword, pageToken) => {\n    try {\n      const response = await fetch(\n        `https://youtube.googleapis.com/youtube/v3/search?maxResults=20&q=${keyword}&type=video&key=${this.key}` +\n          (pageToken ? `&pageToken=${pageToken}` : ''),\n        this.getRequestOptions\n      );\n      return await response.json();\n    } catch (error) {\n      return console.log('error', error);\n    }\n  };\n}\n\nexport default new Repository(process.env.REACT_APP_API_KEY);\n","import {\n  action,\n  computed,\n  makeObservable,\n  observable,\n  runInAction,\n  toJS,\n} from 'mobx';\nimport repository from '../repository/repository';\n\nclass Store {\n  constructor() {\n    makeObservable(this);\n    this.popular = {\n      chart: 'mostPopular',\n      regionCode: 'KR',\n    };\n    this.search = {\n      id: null,\n    };\n    this.nextPageToken = null;\n  }\n\n  @observable.ref\n  _items = [];\n\n  @computed\n  get items() {\n    return toJS(this._items);\n  }\n\n  @observable.ref\n  item = null;\n\n  @action\n  addPage = keyword => {\n    !keyword\n      ? repository.fetchData(this.popular).then(json => {\n          runInAction(() => {\n            this._items = json.items;\n            this.nextPageToken = json.nextPageToken;\n          });\n        })\n      : repository\n          .getItemsId(keyword)\n          .then(json => {\n            runInAction(() => {\n              this.nextPageToken = json.nextPageToken;\n            });\n            return json.items.map(item => item.id.videoId).join();\n          })\n          .then(id => {\n            this.search.id = id;\n            repository.fetchData(this.search).then(json => {\n              runInAction(() => {\n                this._items = json.items;\n                this.onItemClick(null);\n              });\n            });\n          });\n  };\n\n  @action\n  addNextPage = keyword => {\n    !keyword\n      ? repository.fetchData(this.popular, this.nextPageToken).then(json => {\n          runInAction(() => {\n            this._items = this._items.concat(json.items);\n            this.nextPageToken = json.nextPageToken;\n          });\n        })\n      : repository\n          .getItemsId(keyword, this.nextPageToken)\n          .then(json => {\n            runInAction(() => {\n              this.nextPageToken = json.nextPageToken;\n            });\n            return json.items.map(item => item.id.videoId).join();\n          })\n          .then(id => {\n            this.search.id = id;\n            repository.fetchData(this.search).then(json =>\n              runInAction(() => {\n                this._items = this._items.concat(json.items);\n              })\n            );\n          });\n  };\n\n  @action\n  onItemClick = item => {\n    this.item = item;\n  };\n}\n\nexport default new Store();\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app';\nimport '@fortawesome/fontawesome-free/js/all.js';\nimport { Provider } from 'mobx-react';\nimport Store from './store/store';\n\nReactDOM.render(\n  <Provider store={Store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}