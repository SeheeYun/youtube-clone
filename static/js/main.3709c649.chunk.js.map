{"version":3,"sources":["components/item.jsx","components/itemList.jsx","components/header.jsx","components/player.jsx","app.jsx","repository/repository.js","store/store.js","index.js"],"names":["observer","item","diff","view","getVideo","className","onClick","href","src","snippet","thumbnails","medium","url","alt","title","channelTitle","items","parseIntView","useCallback","statistics","viewCount","parseInt","Date","getTime","publishedAt","map","id","indexOf","onSubmit","inputRef","onSearchBar","type","ref","stype","placeholder","allow","allowFullScreen","toLocaleString","substr","likeCount","dislikeCount","description","inject","store","useRef","e","preventDefault","window","scrollTo","top","value","current","addPage","document","querySelector","classList","toggle","useEffect","addEventListener","onScroll","passive","removeEventListener","documentElement","scrollTop","clientHeight","scrollHeight","addNextPage","getChannelLogo","key","fetchData","params","pageToken","a","esc","encodeURIComponent","query","Object","keys","k","join","fetch","getRequestOptions","response","json","console","log","getItemsId","keyword","this","method","redirect","process","observable","onPlayer","add","offPlayer","content","contains","remove","makeObservable","popular","chart","regionCode","search","nextPageToken","toJS","_items","computed","action","repository","then","runInAction","videoId","concat","ReactDOM","render","Store","getElementById"],"mappings":"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","file":"static/js/main.3709c649.chunk.js","sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\n\nconst Item = ({ item, diff, view, getVideo }) => {\n  const itemClick = () => {\n    getVideo(item);\n  };\n\n  return (\n    <li className=\"item\">\n      <div className=\"item_box\" onClick={itemClick}>\n        <div className=\"thumb\">\n          <a href=\"#\">\n            <img src={item.snippet.thumbnails.medium.url} alt=\"thumb\" />\n          </a>\n        </div>\n        <div className=\"meta\">\n          <a className=\"title\" href=\"#\">\n            {item.snippet.title}\n          </a>\n          <div className=\"channel_title\">{item.snippet.channelTitle}</div>\n          <div className=\"meta_data item_meta_data\">\n            <span>조회수 {view}회</span>\n            <span>{diff} 전</span>\n          </div>\n        </div>\n      </div>\n    </li>\n  );\n};\n\nexport default observer(Item);\n","import React, { useCallback } from 'react';\nimport Item from './item';\nimport { observer } from 'mobx-react';\n\nconst ItemList = ({ items, getVideo }) => {\n  const parseIntView = useCallback(item => {\n    const view = item.statistics.viewCount;\n    if (view >= 10000) {\n      return parseInt(view / 10000) + '만';\n    }\n  }, []);\n\n  const diff = useCallback(item => {\n    const curDate = new Date().getTime();\n    const itemDate = new Date(item.snippet.publishedAt).getTime();\n    let diff = curDate - itemDate;\n    diff = parseInt((diff / (1000 * 60 * 60)) % 24);\n    if (diff >= 24) {\n      return '1일';\n    }\n    return diff + '시간';\n  }, []);\n\n  return (\n    <ul className=\"item_list\">\n      {items.map(item => (\n        <Item\n          key={item.id + items.indexOf(item)}\n          item={item}\n          diff={diff(item)}\n          view={item.statistics && parseIntView(item)}\n          getVideo={getVideo}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default observer(ItemList);\n","import { React } from 'react';\nimport { observer } from 'mobx-react';\n\nconst Header = ({ onSubmit, inputRef, onSearchBar }) => {\n  return (\n    <header className=\"header\">\n      <a href=\"https://seheeyun.github.io/youtube-clone/\" className=\"logo\">\n        <img src=\"./images/logo.png\" alt=\"logo\" />\n        <span>YunTube</span>\n      </a>\n      <div className=\"search_box\">\n        <form className=\"search_form\" onSubmit={onSubmit}>\n          <button type=\"button\" className=\"back_btn\" onClick={onSearchBar}>\n            <i className=\"fas fa-arrow-left\"></i>\n          </button>\n          <input ref={inputRef} stype=\"text\" placeholder=\"검색\" />\n          <button type=\"submit\" className=\"search_btn\">\n            <i className=\"fas fa-search\"></i>\n          </button>\n        </form>\n      </div>\n      <div className=\"top_bar\">\n        <button type=\"button\" className=\"search_btn\" onClick={onSearchBar}>\n          <i className=\"fas fa-search\"></i>\n        </button>\n        <button className=\"avatar_btn\">\n          <i className=\"fas fa-user\"></i>\n        </button>\n      </div>\n    </header>\n  );\n};\n\nexport default observer(Header);\n","import React from 'react';\nimport { observer } from 'mobx-react';\n\nconst Player = ({ item }) => {\n  return (\n    <div className=\"player_box\">\n      <div className=\"player_video_box\">\n        <div className=\"player_video\">\n          <iframe\n            title=\"video\"\n            id=\"player\"\n            type=\"text/html\"\n            allow=\"autoplay\"\n            allowFullScreen\n            src={`https://www.youtube.com/embed/${item.id}`}\n          />\n        </div>\n      </div>\n      <div className=\"video_info_box\">\n        <div className=\"video_info\">\n          <h1 className=\"title\">{item.snippet.title}</h1>\n          <div>\n            <div className=\"meta_data\">\n              <span>\n                조회수 {parseInt(item.statistics.viewCount).toLocaleString()}회\n              </span>\n              <span>{item.snippet.publishedAt.substr(0, 10)}</span>\n            </div>\n            <div className=\"like_disLike\">\n              <button>\n                <i className=\"fas fa-thumbs-up\"></i> {item.statistics.likeCount}\n              </button>\n              <button>\n                <i className=\"fas fa-thumbs-down\"></i>{' '}\n                {item.statistics.dislikeCount}\n              </button>\n            </div>\n          </div>\n        </div>\n        <div className=\"video_meta\">\n          <div className=\"meta_thumb\">\n            {item.snippet.channelTitle.substr(0, 1)}\n          </div>\n          <div className=\"meta\">\n            <span>{item.snippet.channelTitle}</span>\n            <span>{item.snippet.description}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default observer(Player);\n","import './app.css';\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport ItemList from './components/itemList';\nimport Header from './components/header';\nimport Player from './components/player';\nimport { inject, observer } from 'mobx-react';\n\nconst App = ({ store }) => {\n  const inputRef = useRef();\n\n  const onSubmit = useCallback(e => {\n    e.preventDefault();\n    window.scrollTo({ top: 0 });\n    const value = inputRef.current.value;\n    value && store.addPage(value);\n    onSearchBar();\n  }, []);\n\n  const onSearchBar = useCallback(() => {\n    const searchBox = document.querySelector('.search_box');\n    searchBox.classList.toggle('on_search_box');\n  }, []);\n\n  useEffect(() => {\n    store.addPage();\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener('scroll', onScroll, { passive: true });\n    return () =>\n      window.removeEventListener('scroll', onScroll, { passive: true });\n  }, []);\n\n  const onScroll = useCallback(() => {\n    const { scrollTop, clientHeight, scrollHeight } = document.documentElement;\n    if (scrollTop + clientHeight === scrollHeight) {\n      !inputRef.current.value\n        ? store.addNextPage()\n        : store.addNextPage(inputRef.current.value);\n    }\n  }, []);\n\n  return (\n    <>\n      <Header\n        onSubmit={onSubmit}\n        onSearchBar={onSearchBar}\n        inputRef={inputRef}\n      />\n      <div className=\"content\">\n        {store.item && (\n          <Player item={store.item} getChannelLogo={store.getChannelLogo} />\n        )}\n        {store.items && (\n          <ItemList items={store.items} getVideo={store.getVideo} />\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default inject('store')(observer(App));\n","class Repository {\n  constructor(key) {\n    this.key = key;\n    this.getRequestOptions = {\n      method: 'GET',\n      redirect: 'follow',\n    };\n  }\n\n  fetchData = async (params, pageToken) => {\n    const esc = encodeURIComponent;\n    const query = Object.keys(params)\n      .map(k => esc(k) + '=' + esc(params[k]))\n      .join('&');\n\n    try {\n      const response = await fetch(\n        `https://youtube.googleapis.com/youtube/v3/videos?part=snippet,statistics&maxResults=20&key=${this.key}&` +\n          query +\n          (pageToken ? `&pageToken=${pageToken}` : ''),\n        this.getRequestOptions\n      );\n      return await response.json();\n    } catch (error) {\n      return console.log('error', error);\n    }\n  };\n\n  getItemsId = async (keyword, pageToken) => {\n    try {\n      const response = await fetch(\n        `https://youtube.googleapis.com/youtube/v3/search?maxResults=20&q=${keyword}&type=video&key=${this.key}` +\n          (pageToken ? `&pageToken=${pageToken}` : ''),\n        this.getRequestOptions\n      );\n      return await response.json();\n    } catch (error) {\n      return console.log('error', error);\n    }\n  };\n}\n\nexport default new Repository(process.env.REACT_APP_API_KEY);\n","import {\n  action,\n  computed,\n  makeObservable,\n  observable,\n  runInAction,\n  toJS,\n} from 'mobx';\nimport repository from '../repository/repository';\n\nclass Store {\n  constructor() {\n    makeObservable(this);\n    this.popular = {\n      chart: 'mostPopular',\n      regionCode: 'KR',\n    };\n    this.search = {\n      id: null,\n    };\n    this.nextPageToken = null;\n  }\n\n  @observable.ref\n  _items = [];\n\n  @computed\n  get items() {\n    return toJS(this._items);\n  }\n\n  @observable.ref\n  item = null;\n\n  @action\n  addPage = keyword => {\n    !keyword\n      ? repository.fetchData(this.popular).then(json => {\n          runInAction(() => {\n            this._items = json.items;\n            this.nextPageToken = json.nextPageToken;\n          });\n        })\n      : repository\n          .getItemsId(keyword)\n          .then(json => {\n            runInAction(() => {\n              this.nextPageToken = json.nextPageToken;\n            });\n            return json.items.map(item => item.id.videoId).join();\n          })\n          .then(id => {\n            this.search.id = id;\n            repository.fetchData(this.search).then(json => {\n              runInAction(() => {\n                this._items = json.items;\n                this.offPlayer();\n              });\n            });\n          });\n  };\n\n  @action\n  addNextPage = keyword => {\n    !keyword\n      ? repository.fetchData(this.popular, this.nextPageToken).then(json => {\n          runInAction(() => {\n            this._items = this._items.concat(json.items);\n            this.nextPageToken = json.nextPageToken;\n          });\n        })\n      : repository\n          .getItemsId(keyword, this.nextPageToken)\n          .then(json => {\n            runInAction(() => {\n              this.nextPageToken = json.nextPageToken;\n            });\n            return json.items.map(item => item.id.videoId).join();\n          })\n          .then(id => {\n            this.search.id = id;\n            repository.fetchData(this.search).then(json =>\n              runInAction(() => {\n                this._items = this._items.concat(json.items);\n              })\n            );\n          });\n  };\n\n  @action\n  getVideo = item => {\n    this.item = item;\n    this.onPlayer();\n  };\n\n  onPlayer = () => {\n    const content = document.querySelector('.content');\n    content.classList.add('on_player');\n  };\n\n  offPlayer = () => {\n    const content = document.querySelector('.content');\n    content.classList.contains('on_player') &&\n      content.classList.remove('on_player');\n  };\n}\n\nexport default new Store();\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app';\nimport '@fortawesome/fontawesome-free/js/all.js';\nimport { Provider } from 'mobx-react';\nimport Store from './store/store';\n\nReactDOM.render(\n  <Provider store={Store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}