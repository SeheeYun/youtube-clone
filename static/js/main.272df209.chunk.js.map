{"version":3,"sources":["components/item.jsx","components/itemList.jsx","components/header.jsx","components/player.jsx","app.jsx","store/store.js","repository/repository.js","index.js"],"names":["observer","view","item","onItemClick","diffDate","useCallback","date","diff","Date","getTime","parseInt","className","onClick","href","src","snippet","thumbnails","medium","url","alt","title","channelTitle","statistics","viewCount","publishedAt","items","map","id","indexOf","onSubmit","inputRef","onSearchBar","type","ref","stype","placeholder","allowFullScreen","allow","toLocaleString","substr","likeCount","dislikeCount","description","inject","store","useRef","loadRef","e","preventDefault","window","scrollTo","top","value","current","addPage","document","querySelector","classList","toggle","useEffect","loaded","io","IntersectionObserver","onIo","threshold","observe","disconnect","isIntersecting","addNextPage","load","repository","key","fetchData","params","pageToken","a","esc","encodeURIComponent","query","Object","keys","k","join","fetch","getRequestOptions","response","json","console","log","getItemsId","keyword","this","method","redirect","process","observable","makeObservable","popular","chart","regionCode","search","nextPageToken","toJS","_items","computed","action","then","runInAction","videoId","concat","ReactDOM","render","Store","getElementById"],"mappings":"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","file":"static/js/main.272df209.chunk.js","sourcesContent":["import React, { useCallback } from 'react';\nimport { observer } from 'mobx-react';\n\nconst Item = ({ item, onItemClick }) => {\n  const itemClick = () => {\n    onItemClick(item);\n  };\n\n  const parseIntView = view => {\n    if (view >= 10000) {\n      return parseInt(view / 10000) + '만';\n    } else return view;\n  };\n\n  const diffDate = useCallback(date => {\n    const curDate = new Date().getTime();\n    const itemDate = new Date(date).getTime();\n    let diff = curDate - itemDate;\n    diff = parseInt(diff / (1000 * 60 * 60));\n    if (diff < 24) {\n      return diff + '시간';\n    } else if (diff >= 24 && diff < 168) {\n      return parseInt(diff / 24) + '일';\n    } else if (diff >= 168 && diff < 672) {\n      return parseInt(diff / 168) + '주';\n    } else if (diff >= 672 && diff < 8760) {\n      return parseInt(diff / 672) + '개월';\n    } else if (diff >= 8760) {\n      return parseInt(diff / 8760) + '년';\n    }\n  }, []);\n\n  return (\n    <li className=\"item\">\n      <div className=\"item_box\" onClick={itemClick}>\n        <a href=\"#\" className=\"thumb\">\n          <img src={item.snippet.thumbnails.medium.url} alt=\"thumb\" />\n        </a>\n        <div className=\"meta\">\n          <a className=\"title\" href=\"#\">\n            {item.snippet.title}\n          </a>\n          <div className=\"channel_title\">{item.snippet.channelTitle}</div>\n          <div className=\"meta_data item_meta_data\">\n            <span>조회수 {parseIntView(item.statistics.viewCount)}회</span>\n            <span>{diffDate(item.snippet.publishedAt)} 전</span>\n          </div>\n        </div>\n      </div>\n    </li>\n  );\n};\n\nexport default observer(Item);\n","import React from 'react';\nimport Item from './item';\nimport { observer } from 'mobx-react';\n\nconst ItemList = ({ items, onItemClick }) => {\n  return (\n    <ul className=\"item_list\">\n      {items.map(item => (\n        <Item\n          key={item.id + items.indexOf(item)}\n          item={item}\n          onItemClick={onItemClick}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default observer(ItemList);\n","import { React } from 'react';\nimport { observer } from 'mobx-react';\n\nconst Header = ({ onSubmit, inputRef, onSearchBar }) => {\n  return (\n    <header className=\"header\">\n      <a href=\"https://seheeyun.github.io/youtube-clone/\" className=\"logo\">\n        <img src=\"./images/logo.png\" alt=\"logo\" />\n        <span>YunTube</span>\n      </a>\n      <div className=\"search_box\">\n        <form className=\"search_form\" onSubmit={onSubmit}>\n          <button\n            type=\"button\"\n            title=\"뒤로\"\n            className=\"back_btn\"\n            onClick={onSearchBar}\n          >\n            <i className=\"fas fa-arrow-left\"></i>\n          </button>\n          <input ref={inputRef} stype=\"text\" placeholder=\"검색\" />\n          <button type=\"submit\" title=\"검색\" className=\"search_btn\">\n            <i className=\"fas fa-search\"></i>\n          </button>\n        </form>\n      </div>\n      <div className=\"top_bar\">\n        <button\n          type=\"button\"\n          title=\"검색\"\n          className=\"search_btn\"\n          onClick={onSearchBar}\n        >\n          <i className=\"fas fa-search\"></i>\n        </button>\n        <button title=\"로그인\" className=\"avatar_btn\">\n          <i className=\"fas fa-user\"></i>\n        </button>\n      </div>\n    </header>\n  );\n};\n\nexport default observer(Header);\n","import React from 'react';\nimport { observer } from 'mobx-react';\n\nconst Player = ({ item }) => {\n  return (\n    <div className=\"player_box\">\n      <div className=\"player_video_box\">\n        <div className=\"player_video\">\n          <iframe\n            title=\"video\"\n            id=\"player\"\n            type=\"text/html\"\n            allowFullScreen\n            allow=\"autoplay\"\n            src={`https://www.youtube.com/embed/${item.id}?autoplay=1`}\n          />\n        </div>\n      </div>\n      <div className=\"video_info_box\">\n        <div className=\"video_info\">\n          <h1 className=\"title\">{item.snippet.title}</h1>\n          <div>\n            <div className=\"meta_data\">\n              <span>\n                조회수 {parseInt(item.statistics.viewCount).toLocaleString()}회\n              </span>\n              <span>{item.snippet.publishedAt.substr(0, 10)}</span>\n            </div>\n            <div className=\"like_disLike\">\n              <button title=\"좋아요\">\n                <i className=\"fas fa-thumbs-up\"></i> {item.statistics.likeCount}\n              </button>\n              <button title=\"싫어요\">\n                <i className=\"fas fa-thumbs-down\"></i>{' '}\n                {item.statistics.dislikeCount}\n              </button>\n            </div>\n          </div>\n        </div>\n        <div className=\"video_meta\">\n          <div className=\"meta_thumb\">\n            {item.snippet.channelTitle.substr(0, 1)}\n          </div>\n          <div className=\"meta\">\n            <span>{item.snippet.channelTitle}</span>\n            <span>{item.snippet.description}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default observer(Player);\n","import './app.css';\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport ItemList from './components/itemList';\nimport Header from './components/header';\nimport Player from './components/player';\nimport { inject, observer } from 'mobx-react';\n\nconst App = ({ store }) => {\n  const inputRef = useRef();\n  const loadRef = useRef();\n\n  const onSubmit = useCallback(e => {\n    e.preventDefault();\n    window.scrollTo({ top: 0 });\n    const value = inputRef.current.value;\n    value && store.addPage(value);\n    onSearchBar();\n  }, []);\n\n  const onSearchBar = useCallback(() => {\n    const searchBox = document.querySelector('.search_box');\n    searchBox.classList.toggle('on_search_box');\n  }, []);\n\n  useEffect(() => {\n    store.addPage();\n    store.loaded(true);\n  }, [store]);\n\n  useEffect(() => {\n    let io;\n    if (loadRef.current) {\n      io = new IntersectionObserver(onIo, { threshold: 0 });\n      io.observe(loadRef.current);\n    }\n    return () => io && io.disconnect();\n  }, [loadRef.current]);\n\n  const onIo = ([entry]) => {\n    if (entry.isIntersecting) {\n      !inputRef.current.value\n        ? store.addNextPage()\n        : store.addNextPage(inputRef.current.value);\n    }\n  };\n\n  return (\n    <>\n      <Header\n        onSubmit={onSubmit}\n        onSearchBar={onSearchBar}\n        inputRef={inputRef}\n      />\n      <div className={`content ${store.item ? 'on_player' : ''}`}>\n        {store.item && <Player item={store.item} />}\n        {store.items && (\n          <ItemList items={store.items} onItemClick={store.onItemClick} />\n        )}\n        {store.load && <div ref={loadRef} className=\"load\"></div>}\n      </div>\n    </>\n  );\n};\n\nexport default inject('store')(observer(App));\n","import {\n  action,\n  computed,\n  makeObservable,\n  observable,\n  runInAction,\n  toJS,\n} from 'mobx';\nimport Repository from '../repository/repository';\n\nconst repository = new Repository(process.env.REACT_APP_API_KEY);\nclass Store {\n  constructor() {\n    makeObservable(this);\n    this.popular = {\n      chart: 'mostPopular',\n      regionCode: 'KR',\n    };\n    this.search = {\n      id: null,\n    };\n    this.nextPageToken = null;\n  }\n\n  @observable.ref\n  _items = [];\n\n  @computed\n  get items() {\n    return toJS(this._items);\n  }\n\n  @observable.ref\n  item = null;\n\n  @action\n  addPage = keyword => {\n    !keyword\n      ? repository.fetchData(this.popular).then(json => {\n          runInAction(() => {\n            this._items = json.items;\n            this.nextPageToken = json.nextPageToken;\n          });\n        })\n      : repository\n          .getItemsId(keyword)\n          .then(json => {\n            runInAction(() => {\n              this.nextPageToken = json.nextPageToken;\n            });\n            return json.items.map(item => item.id.videoId).join();\n          })\n          .then(id => {\n            this.search.id = id;\n            repository.fetchData(this.search).then(json => {\n              runInAction(() => {\n                this._items = json.items;\n                this.onItemClick(null);\n              });\n            });\n          });\n  };\n\n  @action\n  addNextPage = keyword => {\n    !keyword\n      ? repository.fetchData(this.popular, this.nextPageToken).then(json => {\n          runInAction(() => {\n            this._items = this._items.concat(json.items);\n            this.nextPageToken = json.nextPageToken;\n          });\n        })\n      : repository\n          .getItemsId(keyword, this.nextPageToken)\n          .then(json => {\n            runInAction(() => {\n              this.nextPageToken = json.nextPageToken;\n            });\n            return json.items.map(item => item.id.videoId).join();\n          })\n          .then(id => {\n            this.search.id = id;\n            repository.fetchData(this.search).then(json =>\n              runInAction(() => {\n                this._items = this._items.concat(json.items);\n              })\n            );\n          });\n  };\n\n  @action\n  onItemClick = item => {\n    this.item = item;\n  };\n\n  @observable\n  load = false;\n\n  @action\n  loaded = loaded => {\n    if (loaded) {\n      this.load = true;\n    } else {\n      this.load = false;\n    }\n  };\n}\n\nexport default new Store();\n","class Repository {\n  constructor(key) {\n    this.key = key;\n    this.getRequestOptions = {\n      method: 'GET',\n      redirect: 'follow',\n    };\n  }\n\n  fetchData = async (params, pageToken) => {\n    const esc = encodeURIComponent;\n    const query = Object.keys(params)\n      .map(k => esc(k) + '=' + esc(params[k]))\n      .join('&');\n\n    try {\n      const response = await fetch(\n        `https://youtube.googleapis.com/youtube/v3/videos?part=snippet,statistics&maxResults=20&key=${this.key}&` +\n          query +\n          (pageToken ? `&pageToken=${pageToken}` : ''),\n        this.getRequestOptions\n      );\n      return await response.json();\n    } catch (error) {\n      return console.log('error', error);\n    }\n  };\n\n  getItemsId = async (keyword, pageToken) => {\n    try {\n      const response = await fetch(\n        `https://youtube.googleapis.com/youtube/v3/search?maxResults=20&q=${keyword}&type=video&key=${this.key}` +\n          (pageToken ? `&pageToken=${pageToken}` : ''),\n        this.getRequestOptions\n      );\n      return await response.json();\n    } catch (error) {\n      return console.log('error', error);\n    }\n  };\n}\n\nexport default Repository;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app';\nimport '@fortawesome/fontawesome-free/js/all.js';\nimport { Provider } from 'mobx-react';\nimport Store from './store/store';\n\nReactDOM.render(\n  <Provider store={Store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}