(this.webpackJsonptemplate=this.webpackJsonptemplate||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n(1),i=n(9),a=n.n(i),r=(n(19),n(6)),o=(n(20),n(3));var l,u,b,j,d,m,h,p,f,O,x=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],s=t[1],i=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e;return i&&(e=new IntersectionObserver((function(t){Object(r.a)(t,1)[0].isIntersecting&&(s(!0),e.unobserve(i.current))}),{threshold:0})).observe(i.current),function(){return e&&e.disconnect(i)}}),[i]),{isloaded:n,itemRef:i}},v=Object(o.c)((function(e){var t,n=e.item,i=e.onItemClick,a=x(),r=a.isloaded,o=a.itemRef,l=Object(c.useCallback)((function(e){var t=(new Date).getTime()-new Date(e).getTime();return(t=parseInt(t/36e5))<24?t+"\uc2dc\uac04":t>=24&&t<168?parseInt(t/24)+"\uc77c":t>=168&&t<672?parseInt(t/168)+"\uc8fc":t>=672&&t<8760?parseInt(t/672)+"\uac1c\uc6d4":t>=8760?parseInt(t/8760)+"\ub144":void 0}),[]);return Object(s.jsxs)("li",{className:"item",ref:o,children:[r&&Object(s.jsxs)("div",{className:"item-box",onClick:function(){i(n)},children:[Object(s.jsx)("a",{href:"#",className:"thumb",children:Object(s.jsx)("img",{src:n.snippet.thumbnails.medium.url,alt:"thumb"})}),Object(s.jsxs)("div",{className:"meta",children:[Object(s.jsx)("a",{className:"title",href:"#",children:n.snippet.title}),Object(s.jsx)("div",{className:"channel-title",children:n.snippet.channelTitle}),Object(s.jsxs)("div",{className:"meta-data item-meta-data",children:[Object(s.jsxs)("span",{children:["\uc870\ud68c\uc218 ",(t=n.statistics.viewCount,t>=1e4?parseInt(t/1e4)+"\ub9cc":t),"\ud68c"]}),Object(s.jsxs)("span",{children:[l(n.snippet.publishedAt)," \uc804"]})]})]})]}),!r&&Object(s.jsxs)("div",{className:"item-box",children:[Object(s.jsx)("div",{className:"skeleton-thumb",children:Object(s.jsx)("div",{})}),Object(s.jsxs)("div",{className:"meta",children:[Object(s.jsx)("div",{className:"skeleton-title"}),Object(s.jsx)("div",{className:"skeleton-title"})]})]})]})})),g=Object(o.c)((function(e){var t=e.items,n=e.onItemClick;return Object(s.jsx)("ul",{className:"item-list",children:t.map((function(e){return Object(s.jsx)(v,{item:e,onItemClick:n},e.id+t.indexOf(e))}))})})),k=Object(o.c)((function(e){var t=e.onSubmit,n=e.inputRef,c=e.onSearchBar;return Object(s.jsxs)("header",{className:"header",children:[Object(s.jsxs)("a",{href:"https://seheeyun.github.io/youtube-clone/",className:"logo",children:[Object(s.jsx)("img",{src:"./images/logo.png",alt:"logo"}),Object(s.jsx)("span",{children:"YunTube"})]}),Object(s.jsx)("div",{className:"search-box",children:Object(s.jsxs)("form",{className:"search-form",onSubmit:t,children:[Object(s.jsx)("button",{type:"button",title:"\ub4a4\ub85c",className:"back-btn",onClick:c,children:Object(s.jsx)("i",{className:"fas fa-arrow-left"})}),Object(s.jsx)("input",{ref:n,stype:"text",placeholder:"\uac80\uc0c9"}),Object(s.jsx)("button",{type:"submit",title:"\uac80\uc0c9",className:"search-btn",children:Object(s.jsx)("i",{className:"fas fa-search"})})]})}),Object(s.jsxs)("div",{className:"top-bar",children:[Object(s.jsx)("button",{type:"button",title:"\uac80\uc0c9",className:"search-btn",onClick:c,children:Object(s.jsx)("i",{className:"fas fa-search"})}),Object(s.jsx)("button",{title:"\ub85c\uadf8\uc778",className:"avatar-btn",children:Object(s.jsx)("i",{className:"fas fa-user"})})]})]})})),N=Object(o.c)((function(e){var t=e.item;return Object(s.jsxs)("div",{className:"player-box",children:[Object(s.jsx)("div",{className:"player-video-box",children:Object(s.jsx)("div",{className:"player-video",children:Object(s.jsx)("iframe",{title:"video",id:"player",type:"text/html",allowFullScreen:!0,allow:"autoplay",src:"https://www.youtube.com/embed/".concat(t.id,"?autoplay=1")})})}),Object(s.jsxs)("div",{className:"video-info-box",children:[Object(s.jsxs)("div",{className:"video-info",children:[Object(s.jsx)("h1",{className:"title",children:t.snippet.title}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"meta-data",children:[Object(s.jsxs)("span",{children:["\uc870\ud68c\uc218 ",parseInt(t.statistics.viewCount).toLocaleString(),"\ud68c"]}),Object(s.jsx)("span",{children:t.snippet.publishedAt.substr(0,10)})]}),Object(s.jsxs)("div",{className:"like-disLike",children:[Object(s.jsxs)("button",{title:"\uc88b\uc544\uc694",children:[Object(s.jsx)("i",{className:"fas fa-thumbs-up"})," ",t.statistics.likeCount]}),Object(s.jsxs)("button",{title:"\uc2eb\uc5b4\uc694",children:[Object(s.jsx)("i",{className:"fas fa-thumbs-down"})," ",t.statistics.dislikeCount]})]})]})]}),Object(s.jsxs)("div",{className:"video-meta",children:[Object(s.jsx)("div",{className:"meta-thumb",children:t.snippet.channelTitle.substr(0,1)}),Object(s.jsxs)("div",{className:"meta",children:[Object(s.jsx)("span",{children:t.snippet.channelTitle}),Object(s.jsx)("span",{children:t.snippet.description})]})]})]})]})})),y=Object(o.b)("store")(Object(o.c)((function(e){var t=e.store,n=Object(c.useRef)(),i=Object(c.useRef)(),a=Object(c.useCallback)((function(e){e.preventDefault();var s=n.current.value;s&&t.addPage(s),o()}),[t]),o=Object(c.useCallback)((function(){document.querySelector(".search-box").classList.toggle("on-search-box")}),[]);return Object(c.useEffect)((function(){t.addPage(),t.loaded(!0)}),[t]),Object(c.useEffect)((function(){var e;return i.current&&(e=new IntersectionObserver((function(e){Object(r.a)(e,1)[0].isIntersecting&&(n.current.value?t.addNextPage(n.current.value):t.addNextPage())}),{threshold:0})).observe(i.current),function(){return e&&e.disconnect()}}),[i.current]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(k,{onSubmit:a,onSearchBar:o,inputRef:n}),Object(s.jsxs)("div",{className:"content ".concat(t.item?"on-player":""),children:[t.item&&Object(s.jsx)(N,{item:t.item}),t.items&&Object(s.jsx)(g,{items:t.items,onItemClick:t.onItemClick}),t.isload&&Object(s.jsx)("div",{ref:i,className:"sentinel"})]})]})}))),w=(n(21),n(5)),I=n(10),P=n(13),T=n(4),C=(n(25),n(2)),R=n(7),S=n.n(R),_=n(12),D=new function e(t){var n=this;Object(I.a)(this,e),this.fetchData=function(){var e=Object(_.a)(S.a.mark((function e(t,s){var c,i,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=encodeURIComponent,i=Object.keys(t).map((function(e){return c(e)+"="+c(t[e])})).join("&"),e.prev=2,e.next=5,fetch("https://youtube.googleapis.com/youtube/v3/videos?part=snippet,statistics&maxResults=20&key=".concat(n.key,"&")+i+(s?"&pageToken=".concat(s):""),n.getRequestOptions);case 5:return a=e.sent,e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",console.log("error",e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}(),this.getItemsId=function(){var e=Object(_.a)(S.a.mark((function e(t,s){var c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://youtube.googleapis.com/youtube/v3/search?maxResults=20&q=".concat(t,"&type=video&key=").concat(n.key)+(s?"&pageToken=".concat(s):""),n.getRequestOptions);case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",console.log("error",e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),this.key=t,this.getRequestOptions={method:"GET",redirect:"follow"}}("AIzaSyAi9SltLLmkqtHmP_KFFSONcQ2wYTFw_V4"),z=new(l=C.o.ref,u=C.o.ref,b=function(){function e(){Object(I.a)(this,e),Object(w.a)(this,"_items",j,this),Object(w.a)(this,"item",d,this),Object(w.a)(this,"addPage",m,this),Object(w.a)(this,"addNextPage",h,this),Object(w.a)(this,"onItemClick",p,this),Object(w.a)(this,"isload",f,this),Object(w.a)(this,"loaded",O,this),Object(C.n)(this),this.popular={chart:"mostPopular",regionCode:"KR"},this.search={id:null},this.nextPageToken=null}return Object(P.a)(e,[{key:"items",get:function(){return Object(C.q)(this._items)}}]),e}(),j=Object(T.a)(b.prototype,"_items",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(T.a)(b.prototype,"items",[C.g],Object.getOwnPropertyDescriptor(b.prototype,"items"),b.prototype),d=Object(T.a)(b.prototype,"item",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=Object(T.a)(b.prototype,"addPage",[C.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e._items=[],t?D.getItemsId(t).then((function(t){return Object(C.p)((function(){e.nextPageToken=t.nextPageToken})),t.items.map((function(e){return e.id.videoId})).join()})).then((function(t){e.search.id=t,D.fetchData(e.search).then((function(t){Object(C.p)((function(){e._items=t.items,e.onItemClick(null)}))}))})):D.fetchData(e.popular).then((function(t){Object(C.p)((function(){e._items=t.items,e.nextPageToken=t.nextPageToken}))}))}}}),h=Object(T.a)(b.prototype,"addNextPage",[C.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t?D.getItemsId(t,e.nextPageToken).then((function(t){return Object(C.p)((function(){e.nextPageToken=t.nextPageToken})),t.items.map((function(e){return e.id.videoId})).join()})).then((function(t){e.search.id=t,D.fetchData(e.search).then((function(t){return Object(C.p)((function(){e._items=e._items.concat(t.items)}))}))})):D.fetchData(e.popular,e.nextPageToken).then((function(t){Object(C.p)((function(){e._items=e._items.concat(t.items),e.nextPageToken=t.nextPageToken}))}))}}}),p=Object(T.a)(b.prototype,"onItemClick",[C.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.item=t}}}),f=Object(T.a)(b.prototype,"isload",[C.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=Object(T.a)(b.prototype,"loaded",[C.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isload=!!t}}}),b);a.a.render(Object(s.jsx)(o.a,{store:z,children:Object(s.jsx)(y,{})}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.59471d49.chunk.js.map